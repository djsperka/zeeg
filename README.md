# zeeg
matlab scripts for extracting synchronization pulses from eeg data

Assume that clock in EEG data is shifted and has a simple linear scale factor from the "good" 1401-based clock. 

t(eeg)-t(eeg,base) = K * [ t(smr)-t(smr,base) ]

Enobio EEG device dumps data to a folder with *.easy files. 
File naming follows pattern of Stim-Trial-Stim-Trial.......
We only look at _Trial_ files (no electrode recording during stimulation)

The signals/pulses can be crappy. Don't sweat too hard, instead rely on consistency internally. 
Load voltage stream for pulse channel, this channel _should_ have the TTL pulses generated by the script.

Get sliding average and subtract it off. Take max/min of remaining signal, split into steps. 
Step down from top to bottom, at each step find points above threshold. Clusters assumed to be adjacent
indices. Check distance between clusters, quit when clusters closer together than a min distance. 

Need more data to test with. 

To run, 

>> blob=esSync('./../data', 'Dr. Zaius_eeg_000_20180126.mat');
>> [allIndices, allK] = esSyncTest(blob);

That should generate a plot of k - conversion factor between files.
